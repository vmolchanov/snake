(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(49)},30:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);n(30);var i=n(0),a=n.n(i),r=n(26),o=n.n(r),c=n(14),s=n(12),l=n(7),u=n(8),h=n(16),d=n(13),m=n(15),y=(n(39),n(10)),v=n(11);n(40),n(41);var f=function(e){return a.a.createElement("div",{className:"welcome"},a.a.createElement("div",{className:"welcome__logo"},a.a.createElement("span",null,"Snake")),a.a.createElement("div",{className:"welcome__link"},a.a.createElement(y.b,{to:"/mode",className:"welcome__button"},"\u0418\u0433\u0440\u0430\u0442\u044c")))},E=(n(47),{UNDEFINED:-1,EASY:0,HARD:1}),_=function(e){function t(e){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"Mode"},a.a.createElement("ul",{className:"Mode__list"},a.a.createElement("li",{className:"Mode__item"},a.a.createElement(y.b,{to:"/game",className:"Mode__link",onClick:this.onLinkClick.bind(this),"data-mode":E.EASY},"\u041b\u0435\u0433\u043a\u043e")),a.a.createElement("li",{className:"Mode__item"},a.a.createElement(y.b,{to:"/game",className:"Mode__link",onClick:this.onLinkClick.bind(this),"data-mode":E.HARD},"\u0421\u043b\u043e\u0436\u043d\u043e"))))}},{key:"onLinkClick",value:function(e){this.props.onModeChoose(e.target.dataset.mode)}}]),t}(i.Component),O=Object(c.b)(null,function(e){return{onModeChoose:function(t){e({type:"SET_MODE",payload:t})}}})(_),p=n(3);n(48);var w=function(e){var t=e.style,n=e.coord,i=e.size;return a.a.createElement("rect",{style:t,x:n.x,y:n.y,width:i.width,height:i.height})},b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,e),this._x=t,this._y=n}return Object(u.a)(e,[{key:"x",get:function(){return this._x},set:function(e){"number"===typeof e&&(this._x=e)}},{key:"y",get:function(){return this._y},set:function(e){"number"===typeof e&&(this._y=e)}}]),e}(),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(l.a)(this,e),this._width=t,this._height=n}return Object(u.a)(e,[{key:"width",get:function(){return this._width},set:function(e){"number"===typeof e&&e>=0&&(this._width=e)}},{key:"height",get:function(){return this._height},set:function(e){"number"===typeof e&&e>=0&&(this._height=e)}}]),e}();var g=function(e){var t={fill:"rgba(255, 255, 255, 0.15)"},n={fill:"#000000"},i=e.row,r=e.rowIndex;return a.a.createElement("g",{className:"FieldRow"},i.map(function(e,i){return a.a.createElement(w,{key:i,style:0===e?t:n,coord:new b(10*i+3*i+14,10*r+3*r+14),size:new k(10,10)})}))},T={TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},R={ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,ARROW_LEFT:37,ENTER:13},x={SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown"},S=n(23),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).size=10,n.direction=T.RIGHT,n.foodCell=-1,n.emptyCell=0,n.state={field:n.createField()},n.onKeyUp=n.onKeyUp.bind(Object(p.a)(Object(p.a)(n))),n.onOverlayClick=n.onOverlayClick.bind(Object(p.a)(Object(p.a)(n))),n.onScreenResize=n.onScreenResize.bind(Object(p.a)(Object(p.a)(n))),n.onContainerSwipe=n.onContainerSwipe.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.container=document.querySelector(".Game"),this.overlay=this.container.querySelector(".Game__overlay"),this.svg=this.container.querySelector(".Game__svg"),document.addEventListener("keyup",this.onKeyUp),this.overlay.addEventListener("click",this.onOverlayClick),window.addEventListener("resize",this.onScreenResize);var t=new S(this.container);t.get("swipe").set({direction:S.DIRECTION_ALL}),["swipeup","swiperight","swipedown","swipeleft"].forEach(function(n){return t.on(n,e.onContainerSwipe)}),this.setSvgSizes()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyUp),this.overlay.removeEventListener("click",this.onOverlayClick),window.removeEventListener("resize",this.onScreenResize)}},{key:"redirect",value:function(){return 0===this.props.mode?a.a.createElement(v.a,{to:"/"}):null}},{key:"render",value:function(){return a.a.createElement("div",{className:"Game"},this.redirect(),a.a.createElement("div",{className:"Game__overlay"},a.a.createElement("p",{className:"Game__overlay-text"},"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0438\u0433\u0440\u044b")),a.a.createElement("svg",{className:"Game__svg",width:"400",height:"400",viewBox:"0 0 155 155",xmlns:"http://www.w3.org/2000/svg"},this.state.field.map(function(e,t){return a.a.createElement(g,{row:e,rowIndex:t,key:t})})))}},{key:"createField",value:function(){for(var e=new Array(this.size),t=0;t<e.length;t++)e[t]=new Array(this.size);for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)e[n][i]=0;e[3][2]=1;var a=this.getFoodPoint(e);return e[a.y][a.x]=this.foodCell,e}},{key:"start",value:function(){var e=this,t=setInterval(function(){var n=e.move();if(!n)return clearInterval(t),void setTimeout(function(){e.reset()},200);e.setState({field:n})},this.props.mode)}},{key:"reset",value:function(){this.direction=T.RIGHT,this.setState({field:this.createField()}),this.overlay.classList.remove("Game__overlay_hidden")}},{key:"move",value:function(){var e=this.state.field.slice(),t=this.getPointByPart(e,1),n=this.getPointByDirection(t),i=1;if(n.x<0||n.x>=this.size||n.y<0||n.y>=this.size)return null;if(e[n.y][n.x]>this.emptyCell)return null;if(e[n.y][n.x]===this.foodCell){(e=e.map(function(e){return e.map(function(e){return e>0?++e:e})}))[n.y][n.x]=1;var a=this.getFoodPoint(e);return e[a.y][a.x]=this.foodCell,e}for(;null!==t;)e[n.y][n.x]=i,e[t.y][t.x]=this.emptyCell,n=t,t=this.getPointByPart(e,++i,n);return e}},{key:"getPointByDirection",value:function(e){switch(this.direction){case T.TOP:return new b(e.x,e.y-1);case T.RIGHT:return new b(e.x+1,e.y);case T.BOTTOM:return new b(e.x,e.y+1);case T.LEFT:return new b(e.x-1,e.y)}}},{key:"getPointByPart",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==n)return n.y-1>=0&&e[n.y-1][n.x]===t?new b(n.x,n.y-1):n.x+1<this.size&&e[n.y][n.x+1]===t?new b(n.x+1,n.y):n.y+1<this.size&&e[n.y+1][n.x]===t?new b(n.x,n.y+1):n.x-1>=0&&e[n.y][n.x-1]===t?new b(n.x-1,n.y):null;for(var i=0;i<e.length;i++){var a=e[i].indexOf(t);if(-1!==a)return new b(a,i)}return null}},{key:"getFoodPoint",value:function(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e,i){0===e&&t.push(new b(i,n))})}),t[Math.floor(Math.random()*(t.length-1))]}},{key:"setSvgSizes",value:function(){var e=this.container.getBoundingClientRect(),t=e.width,n=e.height,i=Math.min(Math.floor(t),Math.floor(n));i=Math.floor(.9*i),this.svg.style.width="".concat(i,"px"),this.svg.style.height="".concat(i,"px")}},{key:"setDirection",value:function(e){switch(e){case T.TOP:this.direction!=T.BOTTOM&&(this.direction=T.TOP);break;case T.RIGHT:this.direction!=T.LEFT&&(this.direction=T.RIGHT);break;case T.BOTTOM:this.direction!=T.TOP&&(this.direction=T.BOTTOM);break;case T.LEFT:this.direction!=T.RIGHT&&(this.direction=T.LEFT)}}},{key:"onKeyUp",value:function(e){switch(e.which){case R.ARROW_UP:this.setDirection(T.TOP);break;case R.ARROW_RIGHT:this.setDirection(T.RIGHT);break;case R.ARROW_DOWN:this.setDirection(T.BOTTOM);break;case R.ARROW_LEFT:this.setDirection(T.LEFT)}}},{key:"onContainerSwipe",value:function(e){switch(e.type){case x.SWIPE_UP:this.setDirection(T.TOP);break;case x.SWIPE_RIGHT:this.setDirection(T.RIGHT);break;case x.SWIPE_DOWN:this.setDirection(T.BOTTOM);break;case x.SWIPE_LEFT:this.setDirection(T.LEFT)}}},{key:"onOverlayClick",value:function(e){e.preventDefault(),this.overlay.classList.contains("Game__overlay_hidden")||(this.overlay.classList.add("Game__overlay_hidden"),this.start())}},{key:"onScreenResize",value:function(e){this.setSvgSizes()}}]),t}(i.Component),j=Object(c.b)(function(e){return{mode:e.mode}},null)(I),D=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"App__content"},a.a.createElement(y.a,null,a.a.createElement(v.d,null,a.a.createElement(v.b,{exact:!0,path:"/",component:f}),a.a.createElement(v.b,{path:"/mode",component:O}),a.a.createElement(v.b,{path:"/game",component:j})))))}}]),t}(i.Component),N=0;var P=Object(s.b)({mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE":switch(parseInt(t.payload)){case E.UNDEFINED:return 0;case E.EASY:return 1e3;case E.HARD:return 500}default:return e}}}),C=Object(s.c)(P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(a.a.createElement(c.a,{store:C},a.a.createElement(D,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.b87fa5a2.chunk.js.map